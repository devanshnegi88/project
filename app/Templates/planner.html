
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Study Planner - Smart Study Assistant</title>

<style>
/* ===== SAME ORIGINAL CSS (UNCHANGED) ===== */
:root {
  --primary-1: #667eea;
  --primary-2: #764ba2;
  --bg-dark: #0f0f1a;
  --card-bg: #1a1a2e;
  --text-light: #e0e0e0;
  --accent: #6c63ff;
}
body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: var(--bg-dark);
  color: var(--text-light);
  overflow-x: hidden;
}
.header {
  position: relative;
  text-align: center;
  padding: 60px 20px;
  background: linear-gradient(135deg, var(--primary-1), var(--primary-2));
  color: white;
}
.neural-bg svg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0.2;
}
.neural-line {
  fill: none;
  stroke: white;
  stroke-width: 2;
  animation: moveLine 5s infinite linear;
}
@keyframes moveLine {
  0% { stroke-dasharray: 10 10; stroke-dashoffset: 0; }
  100% { stroke-dasharray: 10 10; stroke-dashoffset: -20; }
}
.header-content h1 { font-size: 2.5em; margin-bottom: 10px; }
.header-content p { font-size: 1.2em; margin-top: 0; }
.ai-confidence { margin-top: 15px; font-weight: 500; }
.container { max-width: 1200px; margin: 40px auto; padding: 0 20px; }
.ai-performance-panel { background: var(--card-bg); padding: 30px; border-radius: 20px; box-shadow: 0 0 20px rgba(0,0,0,0.3); }
.recommendation-header { display: flex; align-items: center; gap: 15px; }
.ai-avatar { font-size: 2em; }
.performance-analytics { display: flex; gap: 30px; margin-top: 30px; flex-wrap: wrap; }
.advanced-metric-card { background: #141426; flex: 1; min-width: 250px; border-radius: 15px; padding: 20px; }
.metric-header { display: flex; align-items: center; gap: 10px; }
.metric-title { font-weight: 600; }
.gauge-container { position: relative; width: 120px; height: 120px; margin: 20px auto; }
.confidence-gauge circle { fill: none; stroke-width: 10; }
.gauge-bg { stroke: #2e2e4f; }
.gauge-fill { stroke: var(--accent); transition: stroke-dashoffset 0.5s ease; transform: rotate(-90deg); transform-origin: center; }
.gauge-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; }
.gauge-value { font-size: 1.5em; font-weight: 600; }
.metric-value-large { font-size: 2em; text-align: center; margin-top: 20px; }
.subjects-section { margin-top: 40px; }
.section-header { display: flex; justify-content: space-between; align-items: center; }
.subjects-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; }
.subject-card { background: #141426; border-radius: 12px; padding: 20px; }
.subject-header { display: flex; justify-content: space-between; align-items: center; }
.subject-priority { font-size: 0.8em; padding: 3px 8px; border-radius: 8px; }
.priority-high { background: #ff5c5c; }
.priority-medium { background: #ffb84d; }
.priority-low { background: #4dff88; }
.progress-bar { width: 100%; height: 8px; background: #2e2e4f; border-radius: 8px; overflow: hidden; margin-top: 10px; }
.progress-fill { height: 8px; background: var(--accent); border-radius: 8px; transition: width 0.4s ease; }
</style>
</head>

<body>
  <header class="header">
    <div class="neural-bg">
      <svg viewBox="0 0 400 200">
        <path class="neural-line" d="M50,50 Q150,100 250,50 T350,100" />
        <path class="neural-line" d="M30,100 Q130,50 230,100 T330,50" />
        <path class="neural-line" d="M70,150 Q170,100 270,150 T370,100" />
      </svg>
    </div>
    <div class="header-content">
      <h1>ðŸ¤– AI Study Planner</h1>
      <p>Next-generation AI-powered study optimization with real-time analytics</p>
      <div class="ai-confidence">
        <span>Neural Confidence: <strong id="aiConfidence">--%</strong></span>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="ai-performance-panel">
      <div class="recommendation-header">
        <div class="ai-avatar">ðŸ§ </div>
        <div>
          <h2 class="recommendation-title">AI Performance Dashboard</h2>
          <div class="recommendation-subtitle">Live AI-driven learning insights</div>
        </div>
      </div>

      <div class="performance-analytics">
        <div class="advanced-metric-card">
          <div class="metric-header">
            <div class="metric-icon">ðŸŽ¯</div>
            <div class="metric-title">AI Confidence</div>
          </div>
          <div class="gauge-container">
            <svg class="confidence-gauge" viewBox="0 0 100 100">
              <circle class="gauge-bg" cx="50" cy="50" r="40" />
              <circle class="gauge-fill" cx="50" cy="50" r="40" stroke-dasharray="251.2" stroke-dashoffset="251.2" id="confidenceGauge"/>
            </svg>
            <div class="gauge-text">
              <div class="gauge-value" id="aiConfidenceGauge">--%</div>
              <div class="gauge-label">Confidence</div>
            </div>
          </div>
        </div>

        <div class="advanced-metric-card">
          <div class="metric-header">
            <div class="metric-icon">âš¡</div>
            <div class="metric-title">Learning Velocity</div>
          </div>
          <div class="metric-value-large" id="learningVelocityAdv">--</div>
          <div class="metric-change"><span>â†—</span> Updated in real-time</div>
        </div>
      </div>

      <section class="subjects-section">
        <div class="section-header">
          <h2 class="section-title">Subjects Overview</h2>
        </div>
        <div class="subjects-grid" id="subjectsGrid">
          <p>Loading your planner data...</p>
        </div>
      </section>
    </div>
  </div>

  <script>
  document.addEventListener("DOMContentLoaded", () => {
    fetchDashboardData();
    setInterval(fetchDashboardData, 10000);
  });

  function fetchDashboardData() {
    fetch("/planner/dashboard-data")
      .then(res => res.json())
      .then(data => updateDashboard(data))
      .catch(err => console.error("Error fetching data:", err));
  }

  function updateDashboard(data) {
    document.getElementById("aiConfidence").innerText = data.ai_confidence + "%";
    document.getElementById("aiConfidenceGauge").innerText = data.ai_confidence + "%";

    const gauge = document.getElementById("confidenceGauge");
    const radius = 40;
    const circumference = 2 * Math.PI * radius;
    const offset = circumference - (data.ai_confidence / 100) * circumference;
    gauge.style.strokeDashoffset = offset;

    document.getElementById("learningVelocityAdv").innerText = data.learning_velocity.toFixed(1);

    const grid = document.getElementById("subjectsGrid");
    grid.innerHTML = "";

    data.subjects.forEach(sub => {
      const div = document.createElement("div");
      div.className = "subject-card";
      div.innerHTML = `
        <div class="subject-header">
          <div class="subject-name">${sub.name}</div>
          <div class="subject-priority priority-${sub.priority.toLowerCase()}">${sub.priority}</div>
        </div>
        <div class="subject-meta">
          <span>${sub.topics_completed}/${sub.total_topics} Topics</span>
          <span>${sub.hours} hrs</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" style="width:${sub.progress}%;"></div>
        </div>
      `;
      grid.appendChild(div);
    });
  }
  </script>
</body>
</html>