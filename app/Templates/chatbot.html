<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Chatbot</title>
  

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="/static/css/chatbot.css">
  <script src="/static/js/chatbot.js" defer></script>
  
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar">
    <div class="slidbtn">
      <button id="slider-btn" onclick="slidbar()">â˜°</button>
    </div>
    <h1>ðŸ“˜ Smart Study Planner</h1>
    <a href="/auth/logout" class="logout-btn"><i class="fa-solid fa-right-from-bracket"></i> Logout</a>
  </nav>
  
  

  <div class="slider" id="slider">
  <h2>Menu</h2>
  <div class="menu">
    <button class="nav-btn" onclick="location.href='/api'"><i class="fa-solid fa-chart-line"></i> Dashboard</button>
      <button class="nav-btn" onclick="location.href='/planner'"><i class="fa-regular fa-calendar"></i> Planner</button>
      <button class="nav-btn" onclick="location.href='/chatbot'"><i class="fa-regular fa-message"></i> Chatbot</button>
      <button class="nav-btn" onclick="location.href='/notes_sumariser'"><i class="fa-solid fa-book"></i> Video to Notes</button>
      <button class="nav-btn" onclick="location.href='/quiz'"><i class="fa-solid fa-medal"></i> Quizzes</button>
      <button class="nav-btn" onclick="location.href='/reminders'"><i class="fa-solid fa-medal"></i> Reminders</button>
    

    
  </div>
</div>


  <!-- Main Content -->
  <div class="content">
    <div class="chat-container">
      <div class="chat-header">ðŸ¤– AI Chatbot</div>
      <div class="chat-box" id="chat-box">
        <div class="message bot-message">Hello! How can I help you today?</div>
      </div>
      <div class="chat-input">
        <input type="text" id="user-input" placeholder="Type a message...">
        <button onclick="sendMessage()">Send</button>
      </div>
    </div>
  </div>

  <script>
let startTime = Date.now();

// Auto track time spent on the page
window.addEventListener("beforeunload", () => {
  const duration = (Date.now() - startTime) / 60000; // minutes
  fetch("/planner/track-time", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ subject: document.title || "General", duration })
  });
});

// Example for chatbot (send when user finishes session)
function logChatUsage(questions = 5) {
  fetch("/planner/log-chat-usage", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ questions })
  });
}

// Example for quiz completion
function logQuiz(score) {
  fetch("/planner/log-quiz", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ score })
  });
}
</script>


  
</body>
</html>